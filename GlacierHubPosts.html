<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Show and hide layers</title>
        <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
        <link href="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css" rel="stylesheet">
        <script src="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js"></script>
        <style>
            body { margin: 0; padding: 0; }
            #map { position: absolute; top: 0; bottom: 0; width: 100%; }
            .year {font-family: 'Open Sans', sans-serif;
                color: #75be47;
                font-style: italic;
                font-weight: bold;
                font-size: 12px;}
            .link {font-family: 'Open Sans', sans-serif;
                font-weight: bold;
                font-size: 14px;
                color: #000000 !important;
                text-decoration: none !important;}
            .link:hover{color: #238b21 !important;
                text-decoration: underline !important;}
            
            .fly {
            display: inline-block; /* displays over the map */
            position: relative; /* displays over the map */
            margin: 5px;  /* width of parent div */
            padding: 10px;
            border: 1px solid rgba(255, 255, 255, 1);
            border-radius: 3px; /* rounded corners */
            font-size: 14px;
            text-align: center;
            font-weight: bold;
            color: #fff;
            background: #2f79ac;
            cursor:pointer;
            }
            .fly:hover{
                background: #245d84;
            }
            button {
                font-family: 'Open Sans', sans-serif;
                font-weight: bold;
                font-size: 14px;
                top: 10px;
            } 
        </style>
    </head>
    <body>
        <style>
            #menu {
                background: #fff;
                position: absolute;
                z-index: 1;
                bottom: 50px;
                right: 10px;
                border-radius: 3px;
                width: 120px;
                border: 1px solid rgba(255, 255, 255, 0.4);
                font-family: 'Open Sans', sans-serif;
                font-weight: bold;
                font-size: 14px;
            }
 
            #menu a {
                font-size: 14px;
                color: #404040;
                display: block;
                margin: 0;
                padding: 10px;
                text-decoration: none;
                border-bottom: 1px solid rgba(255, 255, 255, 0.25);
                text-align: center;
            }
 
            #menu a:last-child {
                border: none;
            }
 
            #menu a:hover {
                background-color: #f8f8f8;
                color: #404040;
            }
 
            #menu a.active {
                background-color: #2f79ac;
                color: #ffffff;
            }
 
            #menu a.active:hover {
                background: #245d84;
            }
        </style>
 
        <nav id="menu"></nav>
        <div id="map"></div>
        <button class='fly' id='hmaButton'>High Mountain Asia</button> 
        <button class='fly' id='cascadesButton'>The Cascades</button> 
        <button class='fly' id='arcticButton'>The Arctic</button> 
        <button class='fly' id='antarcticaButton'>Antarctica</button> 
        <button class='fly' id='andesButton'>The Andes</button> 
        <button class='fly' id='alpsButton'>The Alps</button>
        <button class='fly' id='alaskaButton'>Alaska</button>
        <button class='fly' id='globeButton'>Back to Globe</button>
        <script>
            mapboxgl.accessToken = 'pk.eyJ1IjoiamVubmF0cmF2ZXJzIiwiYSI6ImNsZzVmbXh0YjAzMWMzZXBjdXd4NzJ2NHAifQ.ou_E1YintKKKPSq62rxapw';
            const map = new mapboxgl.Map({
                container: 'map',
                // Choose from Mapbox's core styles, or make your own style with Mapbox Studio
                style: 'mapbox://styles/mapbox/outdoors-v12',
                zoom: 1,
                center: [-74,40.7],
                maxZoom: 14,
            });
 
// Wait until the map has finished loading.
            map.on('load', () => {
                
                 //***2019 LAYER***//
                
                map.addSource('nineteenGH', {
                    type: 'vector',
                    url: 'mapbox://jennatravers.88ma9svl'
                });
                map.addLayer({
                    'id': '2019',
                    'type': 'circle',
                    'source': 'nineteenGH',
                    'layout': {
// Make the layer visible by default.
                        'visibility': 'visible'
                    },
                    'paint': {
                        'circle-radius': 4,
                        'circle-stroke-width': 2,
                        'circle-stroke-color': '#000',
                        'circle-color': '#d5eeff'
                    },
                    'source-layer': 'GlacierHub2019-21ziyg'
                });
                map.on('click', '2019', (e) => {
                    var coordinates = e.features[0].geometry.coordinates.slice();
                    var title = e.features[0].properties.Name;
                    var year = e.features[0].properties.Year;
                    var link = e.features[0].properties.Link;
 
                    while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
                        coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
                    }
 
                    new mapboxgl.Popup()
                        .setLngLat(coordinates)
                        .setHTML(    
                        `<a href=${link} class="link" target="_blank">${title}</a><br>
                        <span class="year">${year}</span>
                        `)
                        .addTo(map);
                });
                
                map.on('mouseenter', '2019', () => {
                    map.getCanvas().style.cursor = 'pointer';
                });
                map.on('mouseleave', '2019', () => {
                    map.getCanvas().style.cursor = '';
                });
                
                //***2020 LAYER***//
                
                map.addSource('twentyGH', {
                    type: 'vector',
                    url: 'mapbox://jennatravers.c25xkgha'
                });
                map.addLayer({
                    'id': '2020',
                    'type': 'circle',
                    'source': 'twentyGH',
                    'layout': {
// Make the layer visible by default.
                        'visibility': 'visible'
                    },
                    'paint': {
                        'circle-radius': 4,
                        'circle-stroke-width': 2,
                        'circle-stroke-color': '#000',
                        'circle-color': '#b3e5fa'
                    },
                    'source-layer': 'GlacierHub2020-1mfnpd'
                });
                
                map.on('click', '2020', (e) => {
                    var coordinates = e.features[0].geometry.coordinates.slice();
                    var title = e.features[0].properties.Name;
                    var year = e.features[0].properties.Year;
                    var link = e.features[0].properties.Link;
 
                    while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
                        coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
                    }
 
                    new mapboxgl.Popup()
                        .setLngLat(coordinates)
                        .setHTML(    
                        `<a href=${link} class="link" target="_blank">${title}</a><br>
                        <span class="year">${year}</span>
                        `)
                        .addTo(map);
                });
                
                map.on('mouseenter', '2020', () => {
                    map.getCanvas().style.cursor = 'pointer';
                });
                map.on('mouseleave', '2020', () => {
                    map.getCanvas().style.cursor = '';
                });
                
                //***2021 LAYER***//
                
                map.addSource('twentyoneGH', {
                    type: 'vector',
                    url: 'mapbox://jennatravers.179skep5'
                });
                map.addLayer({
                    'id': '2021',
                    'type': 'circle',
                    'source': 'twentyoneGH',
                    'layout': {
// Make the layer visible by default.
                        'visibility': 'visible'
                    },
                    'paint': {
                        'circle-radius': 4,
                        'circle-stroke-width': 2,
                        'circle-stroke-color': '#000',
                        'circle-color': '#64cef5'
                    },
                    'source-layer': 'GlacierHub2021-2pt1ew'
                });
                
                map.on('click', '2021', (e) => {
                    var coordinates = e.features[0].geometry.coordinates.slice();
                    var title = e.features[0].properties.Name;
                    var year = e.features[0].properties.Year;
                    var link = e.features[0].properties.Link;
 
                    while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
                        coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
                    }
 
                    new mapboxgl.Popup()
                        .setLngLat(coordinates)
                        .setHTML(    
                        `<a href=${link} class="link" target="_blank">${title}</a><br>
                        <span class="year">${year}</span>
                        `)
                        .addTo(map);
                });
                
                map.on('mouseenter', '2021', () => {
                    map.getCanvas().style.cursor = 'pointer';
                });
                map.on('mouseleave', '2021', () => {
                    map.getCanvas().style.cursor = '';
                });
                
                //***2022 LAYER***//
                
                map.addSource('twentytwoGH', {
                    type: 'vector',
                    url: 'mapbox://jennatravers.7j5ym9v5'
                });
                map.addLayer({
                    'id': '2022',
                    'type': 'circle',
                    'source': 'twentytwoGH',
                    'layout': {
// Make the layer visible by default.
                        'visibility': 'visible'
                    },
                    'paint': {
                        'circle-radius': 4,
                        'circle-stroke-width': 2,
                        'circle-stroke-color': '#000',
                        'circle-color': '#00acf1'
                    },
                    'source-layer': 'GlacierHub2022-4eerna'
                });
                
                map.on('click', '2022', (e) => {
                    var coordinates = e.features[0].geometry.coordinates.slice();
                    var title = e.features[0].properties.Name;
                    var year = e.features[0].properties.Year;
                    var link = e.features[0].properties.Link;
 
                    while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
                        coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
                    }
 
                    new mapboxgl.Popup()
                        .setLngLat(coordinates)
                        .setHTML(    
                        `<a href=${link} class="link" target="_blank">${title}</a><br>
                        <span class="year">${year}</span>
                        `)
                        .addTo(map);
                });
                
                map.on('mouseenter', '2022', () => {
                    map.getCanvas().style.cursor = 'pointer';
                });
                map.on('mouseleave', '2022', () => {
                    map.getCanvas().style.cursor = '';
                });
                
                //***2023 LAYER***//
                
                map.addSource('twentythreeGH', {
                    type: 'vector',
                    url: 'mapbox://jennatravers.3c168aw3'
                });
                map.addLayer({
                    'id': '2023',
                    'type': 'circle',
                    'source': 'twentythreeGH',
                    'layout': {
                        'visibility': 'visible'
                    },
                    'paint': {
                        'circle-radius': 4,
                        'circle-stroke-width': 2,
                        'circle-stroke-color': '#000',
                        'circle-color': '#4394cb'
                    },
                    'source-layer': 'GlacierHub2023-dyq90b'
                });
                map.on('click', '2023', (e) => {
                    var coordinates = e.features[0].geometry.coordinates.slice();
                    var title = e.features[0].properties.Name;
                    var year = e.features[0].properties.Year;
                    var link = e.features[0].properties.Link;
 
                    while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
                        coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
                    }
 
                    new mapboxgl.Popup()
                        .setLngLat(coordinates)
                        .setHTML(    
                        `<a href=${link} class="link" target="_blank">${title}</a><br>
                        <span class="year">${year}</span>
                        `)
                        .addTo(map);
                });
                
                map.on('mouseenter', '2023', () => {
                    map.getCanvas().style.cursor = 'pointer';
                });
                map.on('mouseleave', '2023', () => {
                    map.getCanvas().style.cursor = '';
                });
 
            });
 
// After the last frame rendered before the map enters an "idle" state.
            map.on('idle', () => {
// If these layers were not added to the map, abort
                if (!map.getLayer('2023') || 
                    !map.getLayer('2022') || 
                    !map.getLayer('2021') || 
                    !map.getLayer('2020') || 
                    !map.getLayer('2019') ) {
                    return;
                }
 
// Enumerate ids of the layers.
                const toggleableLayerIds = ['2023', '2022', '2021','2020','2019'];
 
// Set up the corresponding toggle button for each layer.
                for (const id of toggleableLayerIds) {
// Skip layers that already have a button set up.
                    if (document.getElementById(id)) {
                        continue;
                    }
 
// Create a link.
                    const link = document.createElement('a');
                    link.id = id;
                    link.href = '#';
                    link.textContent = id;
                    link.className = 'active';
 
// Show or hide layer when the toggle is clicked.
                    link.onclick = function (e) {
                        const clickedLayer = this.textContent;
                        e.preventDefault();
                        e.stopPropagation();
 
                        const visibility = map.getLayoutProperty(
                            clickedLayer,
                            'visibility'
                        );
 
// Toggle layer visibility by changing the layout object's visibility property.
                        if (visibility === 'visible') {
                            map.setLayoutProperty(clickedLayer, 'visibility', 'none');
                            this.className = '';
                        } else {
                            this.className = 'active';
                            map.setLayoutProperty(
                                clickedLayer,
                                'visibility',
                                'visible'
                            );
                        }
                    };
 
                    const layers = document.getElementById('menu');
                    layers.appendChild(link);
                }
            });
             document.getElementById('hmaButton').addEventListener('click', function () {
            map.flyTo({
                center: [78.888,33.458], 
                zoom: 4
            });
            });
            document.getElementById('cascadesButton').addEventListener('click', function () {
            map.flyTo({
                center: [-122.485,47.215], 
                zoom: 5.5
            });
            });
            document.getElementById('arcticButton').addEventListener('click', function () {
            map.flyTo({
                center: [-39.940,73.090], 
                zoom: 3.4
            });
            });
            document.getElementById('antarcticaButton').addEventListener('click', function () {
            map.flyTo({
                center: [-48.635,-85.051], 
                zoom: 2.5
            });
            });
            document.getElementById('andesButton').addEventListener('click', function () {
            map.flyTo({
                center: [-74.992,-30.597], 
                zoom: 2.75
            });
            });
            document.getElementById('alpsButton').addEventListener('click', function () {
            map.flyTo({
                center: [10.130,47.163], 
                zoom: 5.5
            });
            });
            document.getElementById('alaskaButton').addEventListener('click', function () {
            map.flyTo({
                center: [-152.124,61.293], 
                zoom: 3.5
            });
            });
            document.getElementById('globeButton').addEventListener('click', function () {
            map.flyTo({
                    center: [(Math.random() - 0.5) * 360, (Math.random() - 0.5) * 100],
                    essential: true,
                    zoom: 1,
                });
                });
        </script>
 
    </body>
</html>